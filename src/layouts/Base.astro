---
import "@fontsource/roboto-mono/300.css";
import "@fontsource/roboto-mono/500.css";
import "../styles/global.css";

interface Props {
  title?: string;
}

const { title = "notyce.systems" } = Astro.props;

const navLinks = [
  { label: "HOME", href: "/" },
  { label: "BLOG", href: "/blog" },
  { label: "EMAIL", href: "mailto:hello@notyce.systems" },
  { label: "GITHUB", href: "https://github.com/notyce" },
];
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <script>
      (function() {
        const stored = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = stored === 'dark' || stored === 'light' ? stored : (prefersDark ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', theme);
      })();
    </script>
  </head>
  <body>
    <nav>
      {
        navLinks.map((link, i) => (
          <>
            {i > 0 && <span class="separator">|</span>}
            <a href={link.href}>{link.label}</a>
          </>
        ))
      }
      <span class="separator">|</span>
      <button id="theme-toggle" aria-label="Toggle dark mode">DARK</button>
    </nav>
    <slot />
    <script>
      const btn = document.getElementById('theme-toggle');
      function applyTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        btn.textContent = theme === 'dark' ? 'LIGHT' : 'DARK';
      }
      const current = document.documentElement.getAttribute('data-theme') || 'light';
      btn.textContent = current === 'dark' ? 'LIGHT' : 'DARK';
      btn.addEventListener('click', () => {
        const next = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        applyTheme(next);
      });
    </script>
  </body>
</html>
